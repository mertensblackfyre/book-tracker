<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=devide-width, initial-scale=1.0" />

    <meta name="theme-color" content="dark" />
    <link href="https://cdn.jsdelivr.net/npm/daisyui@2.6.0/dist/full.css" rel="stylesheet" type="text/css" />


    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/htmx.org@1.9.5"
        integrity="sha384-xcuj3WpfgjlKF+FXhSQFQ0ZNr39ln+hwjN3npfM9VBnUskLolQAcN80McRIVOPuO"
        crossorigin="anonymous"></script>


    <link rel="manifest" href="../manifest.json">
    <title>Book Tracker</title>

</head>

<body>

    {{ template "nav" . }}

    <div class="divider"></div>

    <div class="container mx-auto p-4">


        <!-- Book detail -->
        <div id="detail" class="card lg:card-side bg-base-100 shadow-xl">
            <figure class="w-1/3">

                <img src='https://covers.openlibrary.org/b/isbn/{{.Picture}}-M.jpg' alt="Book">
            </figure>
            <div class="card-body">
                <h2 class="card-title">{{.Title}}</h2>
                <p>{{.Author}}</p>

                <div class="badge badge-secondary">Fiction</div>

                <div class="badge badge-info">{{.Pages}} Pages</div>

                <div class="badge badge-primary">{{.Status}}</div>

                <p>Summary/description...</p>

                <div class="card-actions justify-end">
                    <button class="btn  btn-sm btn-primary">Edit</button>
                    <button hx-delete="/delete-{{.ID}}" hx-swap="delete" hx-target="#detail" class="btn btn-sm btn-error">Delete</button>
                </div>
            </div>
        </div>


    </div>

</body>

<script>


    async function update(status, id) {
        try {
            const url = `/change-${status}-${id}`

            const response = await fetch(url, {
                method: "PUT",
            })

            window.location.reload();
        }
        catch (err) {
            console.log(err)
        }
    }

    function redirect(url) {
        window.location = url
    }

</script>

</html>
